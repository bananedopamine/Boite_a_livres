{# 
 # @fileName : mouvement/mouvement_tableau_structure.html.twig
 # @author : Dufour Marc (marc.dufour@stjosup.com)
 # @version : 4.0
 # @dateCreate : 12/01/2026
 # @lastUpdate : 11/02/2026 (ajout des entêtes)
 #}
 
{# ========================================
   INDICATEURS ET MESSAGES
   ======================================== #}

<div class="table-controls">
    <div class="table-controls-left">
        <button type="button" class="btn-open-filtres" onclick="ouvrirModaleFiltres()">
            Filtres
            <span id="filter-count-badge" class="filter-count-badge" style="display: none;">0</span>
        </button>
    </div>
    
    <div class="table-controls-right">
        <small class="text-muted">
            <strong id="nombre-mouvements">0</strong> mouvement(s)
        </small>
        <button type="button" id="btn-export-mouvements" class="btn btn-success">
            <i class="fas fa-file-excel"></i> Exporter
        </button>
    </div>
</div>

{# Zone d'affichage du tableau avec attributs data pour le JavaScript #}
<div id="zone-tableau-mouvement" class="breakout-grid"
     data-api-url="{{ path('app_mouvement_api_liste') }}"
     data-show-url="{{ path('app_mouvement_show', {id: '99999'})|replace({'99999': '__ID__'}) }}"
     data-livre-show-url="{{ path('app_livre_show', {id: '66666'})|replace({'66666': '__ID__'}) }}"
     data-export-url="{{ path('app_mouvement_export') }}">
    
    {# ========================================
       CONTRÔLES DU TABLEAU (Filtres + Export)
       ======================================== #}
    
    
    {# Affichage des filtres actifs #}
    <div id="active-filters-container" class="active-filters"></div>
    
    
    {# Indicateur de chargement #}
    <div id="loading-indicator-mouvement" class="text-center py-5" style="display: none;">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Chargement...</span>
        </div>
        <p class="mt-2">Chargement des mouvements...</p>
    </div>

    {# Message d'erreur (caché par défaut) #}
    <div id="message-erreur-mouvement" class="alert alert-warning mt-3" style="display: none;">
        <span id="texte-erreur-mouvement"></span>
    </div>

    {# ========================================
       TABLEAU DES MOUVEMENTS
       ======================================== #}
    {# Tableau des mouvements #}
    <div id="conteneur-tableau-mouvement" class="breakout-inner" style="display: none;">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>Livre (ISBN)</th>
                    <th>Titre</th>
                    <th>Auteur</th>
                    <th>Type</th>
                    <th>Date / Heure</th>
                    <th>Utilisateur</th>
                </tr>
            </thead>
            <tbody id="tbody-mouvements">
                {# Contenu généré dynamiquement par JavaScript #}
            </tbody>
        </table>
    </div>
    
    {# INCLUSION DU TEMPLATE HTML5 POUR LES MOUVEMENTS #}
    {% include 'partials/_templates_mouvement.html.twig' %}
    
</div>