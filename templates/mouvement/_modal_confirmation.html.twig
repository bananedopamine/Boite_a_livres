{# 
 # @fileName : mouvement/_modal_confirmation.html.twig
 # @author : Dufour Marc (marc.dufour@stjosup.com)
 # @version : 2.0
 # @dateCreate : 12/01/2026
 # @lastUpdate : 11/02/2026 (ajout des entêtes)
 #}

<h3>Étape Finale : Confirmation</h3>

<div class="book-summary-box">
    <div class="book-summary-img">
        {% if livre.lienImg %}
            <img src="{{ livre.lienImg }}" alt="Couverture" class="img-cover-thumb">
        {% else %}
            <img data-slot="cover" src="/extras/images/unknown_book.jpg" alt="Couverture" class="img-cover-thumb">
        {% endif %}
    </div>
    <div>
        <strong>Titre :</strong> {{ livre.titre }} <br>
        <strong>Auteur :</strong> {{ livre.auteur }} <br>
        <strong>Genre :</strong> {{ livre.genre|default('Non spécifié') }} <br>
        <strong>ISBN :</strong> {{ livre.isbn }} <br>
        <strong>Stock actuel :</strong> {{ livre.NbStock }}
    </div>
</div>

<form action="{{ path('app_mouvement_finaliser', {'id': livre.id}) }}" method="post" autocomplete="off">
    {# On transmet le type d'action pour le contrôleur #}
    <input type="hidden" name="type_action" value="{{ estSortie ? 'true' : 'false' }}">

    <div class="form-group-modal" autocomplete="off">
        <label for="nomPrenom">Votre Nom et Prénom :</label>
        <input type="text" id="nomPrenom" name="nomPrenom" placeholder="Qui effectue l'opération ?" required autofocus class="input-full" autocomplete="off">
    </div>

    <div class="modal-actions-between">
        <p class="text-action-label {{ estSortie ? 'text-danger-bold' : 'text-success-bold' }}">
            Action : {{ estSortie ? 'SORTIE' : 'ENTRÉE' }}
        </p>
        <button type="submit" class="btn {{ estSortie ? 'btn-warning' : 'btn-success' }}">
            Valider {{ estSortie ? 'l\'emprunt' : 'le retour' }}
        </button>
    </div>
</form>