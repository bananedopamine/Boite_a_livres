{# templates/mouvement/_modal_confirmation.html.twig #}

<h3>Étape Finale : Confirmation</h3>

<div style="background: #f4f4f4; padding: 15px; border-radius: 5px; margin-bottom: 20px; display: flex; gap: 15px; align-items: start;">
    {% if livre.lienImg %}
        <img src="{{ livre.lienImg }}" alt="Couverture" style="max-width: 80px; border-radius: 4px;">
    {% endif %}
    <div>
        <strong>Titre :</strong> {{ livre.nom }} <br>
        <strong>Auteur :</strong> {{ livre.auteur }} <br>
        <strong>ISBN :</strong> {{ livre.isbn }} <br>
        <strong>Stock actuel :</strong> <mark>{{ livre.NbStock }}</mark>
    </div>
</div>

<form action="{{ path('app_mouvement_finaliser', {'id': livre.id}) }}" method="post">
    {# On transmet le type d'action pour le contrôleur #}
    <input type="hidden" name="type_action" value="{{ estSortie ? 'true' : 'false' }}">

    <div style="margin-bottom: 15px;">
        <label for="nomPrenom">Votre Nom et Prénom :</label>
        <input type="text" id="nomPrenom" name="nomPrenom" placeholder="Qui effectue l'opération ?" required autofocus 
               style="width: 100%; padding: 10px;">
    </div>

    <div style="display: flex; gap: 10px; justify-content: space-between; align-items: center;">
        <p style="margin: 0; color: {{ estSortie ? '#d9534f' : '#5cb85c' }}; font-weight: bold;">
            Action : {{ estSortie ? 'SORTIE' : 'ENTRÉE' }}
        </p>
        <button type="submit" class="btn {{ estSortie ? 'btn-warning' : 'btn-success' }}">
            Valider {{ estSortie ? 'l\'emprunt' : 'le retour' }}
        </button>
    </div>
</form>