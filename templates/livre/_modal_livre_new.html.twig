{# 
 # @fileName : livre/_modal_livre_new.html.twig
 # @author : Dufour Marc (marc.dufour@stjosup.com)
 # @version : 1.1
 # @dateCreate : 12/01/2026
 # @lastUpdate : 11/02/2026 (ajout des entêtes)
 #}

<h3>Nouveau livre détecté</h3>
<p>Ce livre n'est pas encore dans votre bibliothèque. Les informations ont été récupérées via Google Books.</p>

<div class="modal-form-container">
    {{ form_start(form, {
        'action': path('app_livre_new', form.vars.value.isbn ? {
            'isbn': form.vars.value.isbn, 
            'titre': form.vars.value.titre, 
            'auteur': form.vars.value.auteur, 
            'description': form.vars.value.description, 
            'image': form.vars.value.lienImg,
            'genre': form.vars.value.genre
        } : {}),
        'attr': {'id': 'form_nouveau_livre','novalidate': 'novalidate','class': 'form-creation-livre'}
    }) }}
        
        <div class="form-group-modal">
            {{ form_label(form.titre, 'Titre du livre') }}
            {{ form_widget(form.titre, {'attr': {'class': 'input-full'}}) }}
        </div>

        <div class="form-group-modal">
            {{ form_label(form.auteur) }}
            {{ form_widget(form.auteur, {'attr': {'class': 'input-full'}}) }}
        </div>

        <div class="form-group-modal">
            {{ form_label(form.isbn) }}
            {{ form_widget(form.isbn, {'attr': {'class': 'input-full', 'readonly': 'readonly'}}) }}
        </div>

        {# Afficher le genre s'il est disponible #}
        {% if form.genre is defined %}
        <div class="form-group-modal">
            {{ form_label(form.genre) }}
            {{ form_widget(form.genre, {'attr': {'class': 'input-full'}}) }}
        </div>
        {% endif %}

        {# On cache la description ou l'image si on ne veut pas encombrer la modale, 
           ou on les laisse en "row" selon ton LivreType #}
        <div class="dn">
            {{ form_rest(form) }}
        </div>

        <div class="modal-actions-end">
            <button type="submit" class="btn btn-success">Enregistrer et Continuer</button>
        </div>
        
    {{ form_end(form) }}
</div>